{"version":3,"sources":["styles/media-queries.js","components/lib.js","auth-provider.js","utils/hooks.js","styles/colors.js","context/auth-context.js","components/book-row.js","utils/api-client.js","discover.js","authenticated-app.js","components/logo.js","components/modal.js","unauthenticated-app.js","app.js","context/index.js","index.js"],"names":["small","FormGroup","styled","div","Input","input","borderRadius","border","background","padding","Button","button","variant","css","CircleButton","width","height","lineHeight","display","alignItems","justifyContent","color","cursor","Dialog","ReachDialog","maxWidth","paddingBottom","boxShadow","margin","mq","spin","keyframes","Spinner","FaSpinner","FullPageSpinner","fontSize","flexDirection","BookListUL","ul","listStyle","gridTemplateRows","gridGap","localStorageKey","getToken","a","window","localStorage","getItem","handleUserResponse","user","setItem","token","logout","removeItem","client","endpoint","data","config","method","body","JSON","stringify","headers","fetch","process","then","response","json","ok","Promise","reject","message","defaultInitialState","status","error","useAsync","initialState","initialStateRef","React","oldState","newState","current","safeSetState","dispatch","mounted","useSafeDispatch","setData","setError","reset","run","promise","Error","isIdle","isLoading","isError","isSuccess","danger","AuthContext","auth","AuthProvider","props","getUser","login","form","username","password","u","register","value","colors","Provider","useAuth","BookRow","book","title","author","coverImageUrl","id","position","aria-labelledby","minHeight","flexGrow","gridTemplateColumns","textDecoration","src","alt","maxHeight","flex","marginLeft","marginTop","fontStyle","publisher","whiteSpace","synopsis","substring","displayName","API_URL","DiscoverBooksScreen","books","useState","query","setQuery","queried","setQueried","useEffect","customHeaders","customConfig","undefined","Authorization","location","assign","encodeURIComponent","onSubmit","e","preventDefault","search","target","elements","placeholder","label","htmlFor","type","length","map","_id","AuthenticatedApp","top","right","onClick","Logo","viewBox","xmlns","d","fill","callAll","fns","args","forEach","fn","ModalContext","createContext","Modal","children","isOpen","setIsOpen","ModalDismissButton","child","useContext","cloneElement","ModalOpenButton","ModalContentsBase","onDismiss","ModalContents","LoginForm","submitButton","handleSubmit","Array","isArray","UnauthenticatedApp","aria-label","App","AppProviders","root","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.6b0ea817.chunk.js","sourcesContent":["export const large = '@media (min-width: 1200px)'\nexport const medium = '@media (min-width: 992px) and (max-width: 1199px)'\nexport const small = '@media (max-width: 991px)'\n","/** @jsxImportSource @emotion/react */\n\nimport styled from '@emotion/styled';\nimport { css, keyframes } from '@emotion/react';\nimport { Dialog as ReachDialog } from '@reach/dialog';\nimport * as mq from '../styles/media-queries';\nimport { FaSpinner } from 'react-icons/fa';\n\nexport const FormGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const Input = styled.input({\n  borderRadius: '3px',\n  border: '1px solid #f1f1f4',\n  background: '#f1f2f7',\n  padding: '8px 12px',\n});\n\nconst buttonColor = ({ variant }) => {\n  switch (variant) {\n    case 'primary':\n      return css`\n        background: #3f51b5;\n        color: white;\n      `;\n    case 'secondary':\n      return css`\n        background: #f1f2f7;\n        color: #434449;\n      `;\n    default:\n      break;\n  }\n};\n\nexport const Button = styled.button`\n  padding: 10px 15px;\n  border: 0;\n  line-height: 1;\n  border-radius: 3px;\n  ${buttonColor}\n`;\n\nexport const CircleButton = styled.button({\n  borderRadius: '30px',\n  padding: '0',\n  width: '40px',\n  height: '40px',\n  lineHeight: '1',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  background: 'white',\n  color: '#434449',\n  border: `1px solid #f1f1f4`,\n  cursor: 'pointer',\n});\n\nexport const Dialog = styled(ReachDialog)({\n  maxWidth: '450px',\n  borderRadius: '3px',\n  paddingBottom: '3.5em',\n  boxShadow: '0 10px 30px -5px rgba(0, 0, 0, 0.2)',\n  margin: '20vh auto',\n  [mq.small]: {\n    width: '100%',\n    margin: '10vh auto',\n  },\n});\n\nconst spin = keyframes`\n  0% {\n    transform: rotate(0deg)\n  }\n  100% {\n    transform: rotate(360deg)\n  }\n`;\n\nexport const Spinner = styled(FaSpinner)`\n  animation: ${spin} 1s linear infinite;\n`;\n\nexport function FullPageSpinner() {\n  return (\n    <div\n      css={{\n        fontSize: '4em',\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Spinner />\n    </div>\n  );\n}\n\nexport const BookListUL = styled.ul({\n  listStyle: 'none',\n  padding: '0',\n  display: 'grid',\n  gridTemplateRows: 'repeat(auto-fill, minmax(100px, 1fr))',\n  gridGap: '1em',\n});\n","const localStorageKey = '__auth_provider_token__';\n\nasync function getToken() {\n  return window.localStorage.getItem(localStorageKey);\n}\n\nfunction handleUserResponse(user) {\n  window.localStorage.setItem(localStorageKey, user.token);\n  return user;\n}\n\nfunction login({ username, password }) {\n  return client('login', { username, password }).then(handleUserResponse);\n}\n\nfunction register({ username, password }) {\n  return client('register', { username, password }).then(handleUserResponse);\n}\n\nasync function logout() {\n  window.localStorage.removeItem(localStorageKey);\n}\n\nconst authURL = process.env.REACT_APP_AUTH_URL;\n\nexport async function client(endpoint, data) {\n  const config = {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: { 'Content-Type': 'application/json' },\n  };\n\n  return window\n    .fetch(`${authURL}/${endpoint}`, config)\n    .then(async (response) => {\n      const data = await response.json();\n      if (!response.ok) {\n        return Promise.reject(data.message);\n      }\n      return data;\n    });\n}\n\nexport { getToken, login, register, logout, localStorageKey };\n","import * as React from 'react';\n\nfunction useSafeDispatch(dispatch) {\n  const mounted = React.useRef(false);\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => (mounted.current = false);\n  }, []);\n  return React.useCallback(\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch]\n  );\n}\n\nconst defaultInitialState = { status: 'idle', data: null, error: null };\nexport function useAsync(initialState) {\n  const initialStateRef = React.useRef({\n    ...defaultInitialState,\n    ...initialState,\n  });\n  const [{ data, error, status }, setState] = React.useReducer(\n    (oldState, newState) => {\n      return { ...oldState, ...newState };\n    },\n    initialStateRef.current\n  );\n  const safeSetState = useSafeDispatch(setState);\n  const setData = React.useCallback(\n    (data) => safeSetState({ data, status: 'resolved' }),\n    [safeSetState]\n  );\n  const setError = React.useCallback(\n    (error) => safeSetState({ error, status: 'rejected' }),\n    [safeSetState]\n  );\n  const reset = React.useCallback(\n    () => safeSetState(initialStateRef.current),\n    [safeSetState]\n  );\n  const run = React.useCallback(\n    (promise) => {\n      if (!promise || !promise.then) {\n        throw new Error(\n          `The argument passed to useAsync().run must be a promise. Maybe a function that's passed isn't returning anything?`\n        );\n      }\n      safeSetState({ status: 'pending' });\n      return promise.then(\n        (data) => {\n          setData(data);\n          return data;\n        },\n        (error) => {\n          setError(error);\n          return Promise.reject(error);\n        }\n      );\n    },\n    [safeSetState, setData, setError]\n  );\n  return {\n    isIdle: status === 'idle',\n    isLoading: status === 'pending',\n    isError: status === 'rejected',\n    isSuccess: status === 'resolved',\n\n    error,\n    status,\n    data,\n\n    setData,\n    setError,\n\n    run,\n    reset,\n  };\n}\n","export const base = 'white'\nexport const text = '#434449'\nexport const gray = '#f1f2f7'\nexport const gray10 = '#f1f1f4'\nexport const gray20 = '#e4e5e9'\nexport const gray80 = '#6f7077'\nexport const indigo = '#3f51b5'\nexport const indigoDarken10 = '#364495'\nexport const indigoLighten80 = '#b7c1f8'\nexport const yellow = '#ffc107'\nexport const green = '#4caf50'\nexport const danger = '#ef5350'\nexport const orange = 'orange'\n","import * as React from 'react';\nimport * as auth from '../auth-provider';\nimport { useAsync } from '../utils/hooks';\nimport { client } from '../auth-provider';\nimport * as colors from '../styles/colors';\nimport { FullPageSpinner } from '../components/lib';\n\nconst AuthContext = React.createContext();\nAuthContext.displayName = 'AuthContext';\n\nasync function getUser() {\n  let user = null;\n  const token = await auth.getToken();\n  if (token) {\n    user = await client('me', { token });\n  }\n\n  return user;\n}\n\nexport function AuthProvider(props) {\n  const {\n    data: user,\n    error,\n    isLoading,\n    isIdle,\n    isError,\n    isSuccess,\n    run,\n    setData,\n  } = useAsync();\n\n  React.useEffect(() => {\n    run(getUser());\n  }, [run]);\n\n  const login = React.useCallback(\n    (form) => auth.login(form).then((u) => setData(u)),\n    [setData]\n  );\n\n  const register = React.useCallback(\n    (form) => auth.register(form).then((u) => setData(u)),\n    [setData]\n  );\n  const logout = React.useCallback(() => {\n    auth.logout();\n    setData(null);\n  }, [setData]);\n\n  const value = React.useMemo(\n    () => ({ user, login, logout, register }),\n    [login, logout, register, user]\n  );\n\n  if (isLoading || isIdle) {\n    return <FullPageSpinner />;\n  }\n\n  if (isError) {\n    return (\n      <div\n        css={{\n          color: colors.danger,\n          height: '100vh',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <p>Uh oh... There's a problem. Try refreshing the app.</p>\n        <pre>{error}</pre>\n      </div>\n    );\n  }\n  if (isSuccess) {\n    return <AuthContext.Provider value={value} {...props} />;\n  }\n}\n\nexport function useAuth() {\n  return React.useContext(AuthContext);\n}\n","/** @jsxImportSource @emotion/react */\n\nimport * as mq from '../styles/media-queries';\nimport * as colors from '../styles/colors';\n\nfunction BookRow({ book }) {\n  const { title, author, coverImageUrl } = book;\n\n  const id = `book-row-book-${book.id}`;\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        position: 'relative',\n      }}\n    >\n      <div\n        aria-labelledby={id}\n        css={{\n          minHeight: 270,\n          flexGrow: 2,\n          display: 'grid',\n          gridTemplateColumns: '140px 1fr',\n          gridGap: 20,\n          border: `1px solid ${colors.gray20}`,\n          color: colors.text,\n          padding: '1.25em',\n          borderRadius: '3px',\n          ':hover,:focus': {\n            textDecoration: 'none',\n            boxShadow: '0 5px 15px -5px rgba(0,0,0,.08)',\n            color: 'inherit',\n          },\n        }}\n      >\n        <div\n          css={{\n            width: 140,\n            [mq.small]: {\n              width: 100,\n            },\n          }}\n        >\n          <img\n            src={coverImageUrl}\n            alt={`${title} book cover`}\n            css={{ maxHeight: '100%', width: '100%' }}\n          />\n        </div>\n        <div css={{ flex: 1 }}>\n          <div css={{ display: 'flex', justifyContent: 'space-between' }}>\n            <div css={{ flex: 1 }}>\n              <h2\n                id={id}\n                css={{\n                  fontSize: '1.25em',\n                  margin: '0',\n                  color: colors.indigo,\n                }}\n              >\n                {title}\n              </h2>\n            </div>\n            <div css={{ marginLeft: 10 }}>\n              <div\n                css={{\n                  marginTop: '0.4em',\n                  fontStyle: 'italic',\n                  fontSize: '0.85em',\n                }}\n              >\n                {author}\n              </div>\n              <small>{book.publisher}</small>\n            </div>\n          </div>\n          <small css={{ whiteSpace: 'break-spaces', display: 'block' }}>\n            {book.synopsis.substring(0, 500)}...\n          </small>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport { BookRow };\n","import * as auth from '../auth-provider';\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport default function client(\n  endpoint,\n  { data, token, headers: customHeaders, ...customConfig } = {}\n) {\n  const config = {\n    method: data ? 'POST' : 'GET',\n    body: data ? JSON.stringify(data) : undefined,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined,\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n  return window\n    .fetch(`${API_URL}/${endpoint}`, config)\n    .then(async (response) => {\n      if (response.status === 401) {\n        auth.logout();\n        window.location.assign(window.location);\n        return Promise.reject({ message: 'Please re-authenticate.' });\n      }\n      const data = await response.json();\n      if (response.ok) {\n        return data;\n      } else {\n        return Promise.reject(data.message);\n      }\n    });\n}\n","/** @jsxImportSource @emotion/react */\n\nimport { Input, Spinner, BookListUL } from './components/lib';\nimport { BookRow } from './components/book-row';\nimport { FaSearch, FaTimes } from 'react-icons/fa';\nimport * as colors from './styles/colors';\nimport client from './utils/api-client';\n\nimport { css } from '@emotion/react';\n\nimport ToolTip from '@reach/tooltip';\nimport { useEffect, useState } from 'react';\nimport { useAsync } from './utils/hooks';\nimport { useAuth } from './context/auth-context';\n\nexport default function DiscoverBooksScreen() {\n  const { user } = useAuth();\n  const { data: books, run, error, isLoading, isError, isSuccess } = useAsync();\n  const [query, setQuery] = useState('');\n  const [queried, setQueried] = useState(false);\n  function handleSearchSubmit(e) {\n    e.preventDefault();\n    const search = e.target.elements?.search?.value;\n    setQueried(true);\n    setQuery(search);\n  }\n\n  useEffect(() => {\n    if (!queried) return;\n    run(\n      client(`books?query=${encodeURIComponent(query)}`, { token: user.token })\n    );\n  }, [queried, query, run, user.token]);\n\n  return (\n    <div\n      css={css`\n        width: 90vw;\n        max-width: 800px;\n        padding: 40px 0;\n        margin: auto;\n      `}\n    >\n      <form\n        onSubmit={handleSearchSubmit}\n        css={css`\n          margin-bottom: 30px;\n        `}\n      >\n        <Input\n          placeholder=\"search books...\"\n          id=\"search\"\n          css={css`\n            width: 100%;\n          `}\n        />\n        <ToolTip label=\"Search Books\">\n          <label htmlFor=\"search\">\n            <button\n              type=\"submit\"\n              css={css`\n                border: 0;\n                position: relative;\n                margin-left: -35px;\n                background: transparent;\n              `}\n            >\n              {isLoading ? (\n                <Spinner />\n              ) : isError ? (\n                <FaTimes css={{ color: colors.danger }} />\n              ) : (\n                <FaSearch />\n              )}\n            </button>\n          </label>\n        </ToolTip>\n      </form>\n      {isError ? (\n        <div css={{ color: colors.danger }}>\n          <p>There was an error:</p>\n          <pre>{error.message}</pre>\n        </div>\n      ) : null}\n      {isSuccess ? (\n        books?.length ? (\n          <BookListUL css={{ marginTop: 20 }}>\n            {books.map((book) => (\n              <li key={book._id}>\n                <BookRow key={book._id} book={book} />\n              </li>\n            ))}\n          </BookListUL>\n        ) : (\n          <p>No books found. Try another search.</p>\n        )\n      ) : null}\n    </div>\n  );\n}\n","/** @jsxImportSource @emotion/react */\nimport { Button } from './components/lib';\nimport { useAuth } from './context/auth-context';\nimport DiscoverBooksScreen from './discover';\nexport default function AuthenticatedApp() {\n  const { user, logout } = useAuth();\n  return (\n    <div>\n      <div\n        css={{\n          display: 'flex',\n          alignItems: 'center',\n          position: 'absolute',\n          top: '10px',\n          right: '10px',\n        }}\n      >\n        {user.username}\n        <Button\n          variant=\"secondary\"\n          css={{ marginLeft: '10px' }}\n          onClick={logout}\n        >\n          Logout\n        </Button>\n      </div>\n      <DiscoverBooksScreen />\n    </div>\n  );\n}\n","import * as React from 'react';\n\nconst Logo = ({ width = '48', height = '48' }) => {\n  return (\n    <svg\n      width={`${width}px`}\n      height={`${height}px`}\n      viewBox={`0 0 48 48`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <title>Bookshelf</title>\n      <g>\n        <path\n          d=\"M12,5H2C1.44772,5,1,5.44772,1,6v27h12V6C13,5.44772,12.55229,5,12,5z\"\n          fill=\"#E86C60\"\n        />\n        <path\n          d=\"M12,43H2c-0.55228,0-1-0.44772-1-1V32h12v10C13,42.55228,12.55229,43,12,43z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M8,23H6c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55229,0,1,0.44771,1,1v11 C9,22.55228,8.55229,23,8,23z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M35.44301,3.67613l-9.68988,2.47109c-0.53516,0.13647-0.85835,0.68094-0.72188,1.2161l6.67194,26.16267 l11.62785-2.96531L36.6591,4.398C36.52263,3.86285,35.97816,3.53965,35.44301,3.67613z\"\n          fill=\"#43A6DD\"\n        />\n        <path\n          d=\"M44.83315,40.49766l-9.68988,2.47109c-0.53516,0.13647-1.07962-0.18672-1.21609-0.72188l-2.47109-9.68988 l11.62785-2.96531l2.47109,9.68987C45.69151,39.81672,45.36831,40.36118,44.83315,40.49766z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M36.01502,22.10634l-1.93797,0.49422c-0.53516,0.13647-1.07962-0.18672-1.2161-0.72188l-2.7182-10.65886 c-0.13647-0.53516,0.18672-1.07962,0.72188-1.2161L32.8026,9.5095c0.53516-0.13647,1.07962,0.18672,1.2161,0.72188l2.7182,10.65886 C36.87337,21.4254,36.55017,21.96987,36.01502,22.10634z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M24,5H14c-0.55229,0-1,0.44772-1,1v27h12V6C25,5.44772,24.55228,5,24,5z\"\n          fill=\"#E6E6E6\"\n        />\n        <path\n          d=\"M24,43H14c-0.55229,0-1-0.44772-1-1V32h12v10C25,42.55228,24.55228,43,24,43z\"\n          fill=\"#B3B3B3\"\n        />\n        <path\n          d=\"M20,23h-2c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55228,0,1,0.44771,1,1v11 C21,22.55228,20.55228,23,20,23z\"\n          fill=\"#FFFFFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport default Logo;\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { cloneElement, createContext, useContext, useState } from 'react';\nimport { Dialog, CircleButton } from './lib';\n\nconst callAll =\n  (...fns) =>\n  (...args) => {\n    fns.forEach((fn) => fn && fn(...args));\n  };\n\nconst ModalContext = createContext();\nModalContext.displayName = 'ModalContext';\n\nfunction Modal({ children, ...props }) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <ModalContext.Provider value={[isOpen, setIsOpen]} {...props}>\n      {children}\n    </ModalContext.Provider>\n  );\n}\n\nfunction ModalDismissButton({ children: child }) {\n  const [, setIsOpen] = useContext(ModalContext);\n  return cloneElement(child, {\n    onClick: callAll(() => setIsOpen(false), child.props.onClick),\n  });\n}\n\nfunction ModalOpenButton({ children: child }) {\n  const [, setIsOpen] = useContext(ModalContext);\n  return cloneElement(child, {\n    onClick: callAll(() => setIsOpen(true), child.props.onClick),\n  });\n}\n\nfunction ModalContentsBase(props) {\n  const [isOpen, setIsOpen] = useContext(ModalContext);\n  return (\n    <Dialog\n      isOpen={isOpen}\n      onDismiss={() => setIsOpen(false)}\n      {...props}\n    ></Dialog>\n  );\n}\n\nfunction ModalContents({ title, children, ...props }) {\n  return (\n    <ModalContentsBase {...props}>\n      <div\n        css={css`\n          display: flex;\n          justify-content: flex-end;\n        `}\n      >\n        <ModalDismissButton>\n          <CircleButton>x</CircleButton>\n        </ModalDismissButton>\n      </div>\n      <h3\n        css={css`\n          text-align: center;\n          font-size: 2em;\n        `}\n      >\n        {title}\n      </h3>\n      {children}\n    </ModalContentsBase>\n  );\n}\n\nexport { Modal, ModalOpenButton, ModalDismissButton, ModalContents };\n","/** @jsxImportSource @emotion/react */\n\nimport { css } from '@emotion/react';\nimport Logo from './components/logo';\nimport { FormGroup, Input, Button, Spinner } from './components/lib';\nimport { Modal, ModalOpenButton, ModalContents } from './components/modal';\nimport { cloneElement } from 'react';\nimport { useAuth } from './context/auth-context';\nimport { useAsync } from './utils/hooks';\nimport * as colors from './styles/colors';\n\nfunction LoginForm({ onSubmit, submitButton }) {\n  const { isLoading, isError, error, run } = useAsync();\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const username = e.target.elements?.username?.value;\n    const password = e.target.elements?.password?.value;\n    run(onSubmit({ username, password }));\n  };\n\n  return (\n    <form\n      onSubmit={(e) => handleSubmit(e)}\n      css={css`\n        display: flex;\n        flex-direction: column;\n        align-items: stretch;\n        > div {\n          margin: 10px auto;\n          width: 100%;\n          max-width: 300px;\n        }\n      `}\n    >\n      <FormGroup>\n        <label htmlFor=\"username\">username</label>\n        <Input type=\"text\" id=\"username\" />\n      </FormGroup>\n      <FormGroup>\n        <label htmlFor=\"password\">password</label>\n        <Input type=\"text\" id=\"password\" />\n      </FormGroup>\n      <div>\n        {cloneElement(\n          submitButton,\n          {\n            type: 'primary',\n          },\n          ...(Array.isArray(submitButton.props.children)\n            ? submitButton.props.children\n            : [submitButton.props.children]),\n          isLoading ? <Spinner css={{ marginLeft: 5 }} /> : null\n        )}\n      </div>\n      {isError ? <div css={{ color: colors.danger }}>{error}</div> : null}\n    </form>\n  );\n}\n\nexport default function UnauthenticatedApp() {\n  const { login, register } = useAuth();\n  return (\n    <div\n      css={css`\n        height: 100vh;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 10px 0;\n      `}\n    >\n      <Logo width=\"80\" height=\"80\" />\n      <h1>Bookshelf</h1>\n      <div\n        css={css`\n          & > button {\n            margin: 0 6px;\n          }\n        `}\n      >\n        <Modal>\n          <ModalOpenButton>\n            <Button variant=\"primary\">Login</Button>\n          </ModalOpenButton>\n          <ModalContents title=\"Login\" aria-label=\"login\">\n            <LoginForm\n              onSubmit={login}\n              submitButton={<Button variant=\"primary\">login</Button>}\n            />\n          </ModalContents>\n        </Modal>\n        <Modal>\n          <ModalOpenButton>\n            <Button variant=\"secondary\">Register</Button>\n          </ModalOpenButton>\n          <ModalContents title=\"Register\" aria-label=\"register\">\n            <LoginForm\n              submitButton={<Button variant=\"secondary\">register</Button>}\n              onSubmit={register}\n            />\n          </ModalContents>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport AuthenticatedApp from './authenticated-app';\nimport UnauthenticatedApp from './unauthenticated-app';\nimport { useAuth } from './context/auth-context';\n\nexport default function App() {\n  const { user } = useAuth();\n  return user ? <AuthenticatedApp /> : <UnauthenticatedApp />;\n}\n","import { AuthProvider } from './auth-context';\nexport default function AppProviders({ children }) {\n  return <AuthProvider>{children}</AuthProvider>;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\nimport AppProviders from './context/index';\n\nimport './bootstrap';\n\nconst root = document.getElementById('root');\nReactDOM.render(\n  <AppProviders>\n    <App />\n  </AppProviders>,\n  root\n);\n"],"sourceRoot":""}