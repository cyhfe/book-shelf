{"version":3,"sources":["styles/media-queries.js","components/lib.js","auth-provider.js","utils/hooks.js","styles/colors.js","context/auth-context.js","utils/api-client.js","utils/list.js","components/status-button.js","components/book-row.js","assets/book-placeholder.svg","utils/books.js","screens/discover.js","screens/book.js","screens/not-found.js","styles/mq.js","components/book-list.js","screens/finished.js","screens/reading-list.js","authenticated-app.js","components/logo.js","components/modal.js","unauthenticated-app.js","app.js","context/index.js","index.js"],"names":["small","FormGroup","styled","div","Input","input","borderRadius","border","background","padding","Button","button","variant","css","CircleButton","width","height","lineHeight","display","alignItems","justifyContent","color","cursor","Dialog","ReachDialog","maxWidth","paddingBottom","boxShadow","margin","mq","spin","keyframes","Spinner","FaSpinner","FullPageSpinner","fontSize","flexDirection","BookListUL","ul","listStyle","gridTemplateRows","gridGap","localStorageKey","getToken","window","localStorage","getItem","handleUserResponse","user","setItem","token","logout","client","then","res","console","log","catch","err","Promise","reject","finally","removeItem","location","href","authURL","process","endpoint","data","a","config","method","body","JSON","stringify","headers","fetch","response","ok","statusText","json","defaultInitialState","status","error","useAsync","initialState","initialStateRef","React","oldState","newState","current","safeSetState","dispatch","mounted","useSafeDispatch","setData","setError","reset","run","promise","Error","isIdle","isLoading","isError","isSuccess","text","gray10","indigo","danger","AuthContext","auth","AuthProvider","props","getUser","login","form","username","password","u","register","value","colors","Provider","useAuth","displayName","API_URL","useClient","customHeaders","customConfig","undefined","Authorization","message","useList","useQuery","books","useListItem","bookId","find","item","book","_id","useUpdateListItem","queryClient","useQueryClient","useMutation","id","rest","onSuccess","invalidateQueries","TooltipButton","label","highlight","icon","backgroundColor","StatusButton","listItem","useCreateListItem","addToList","mutate","addToListLoading","useRemoveFromList","removeFromList","removeFromListLoading","updateItem","updateItemLoading","onClick","BookRow","title","author","coverImageUrl","to","minHeight","gap","textDecoration","src","alt","maxHeight","flex","marginBottom","marginLeft","marginTop","fontStyle","publisher","whiteSpace","synopsis","substring","loadingBook","loadingBooks","Array","from","length","v","index","DiscoverBooksScreen","useState","query","setQuery","result","encodeURIComponent","useBooksSearch","onSubmit","e","preventDefault","search","target","elements","placeholder","htmlFor","type","map","Book","useParams","useBook","marginRight","NotesTextarea","updateListItem","debounceMutate","func","timer","timeout","args","clearTimeout","setTimeout","apply","debounce","notes","fontWeight","name","onChange","defaultValue","NotFound","ListItemList","filterListItems","noListItems","noFilteredListItems","listItems","filteredListItems","FinishedScreen","li","filter","i","ReadingListScreen","AuthenticatedApp","minWidth","Nav","flexGrow","AppRoutes","path","exact","render","component","BookScreen","NotFoundScreen","NavLink","match","useRouteMatch","borderLeft","Logo","viewBox","xmlns","d","fill","callAll","fns","forEach","fn","ModalContext","createContext","Modal","children","isOpen","setIsOpen","ModalDismissButton","child","useContext","cloneElement","ModalOpenButton","ModalContentsBase","onDismiss","ModalContents","LoginForm","submitButton","handleSubmit","isArray","UnauthenticatedApp","aria-label","App","QueryClient","defaultOptions","queries","staleTime","cacheTime","AppProviders","root","document","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.eb4958f5.chunk.js","sourcesContent":["export const large = '@media (min-width: 1200px)'\nexport const medium = '@media (min-width: 992px) and (max-width: 1199px)'\nexport const small = '@media (max-width: 991px)'\n","/** @jsxImportSource @emotion/react */\n\nimport styled from '@emotion/styled';\nimport { css, keyframes } from '@emotion/react';\nimport { Dialog as ReachDialog } from '@reach/dialog';\nimport * as mq from '../styles/media-queries';\nimport { FaSpinner } from 'react-icons/fa';\n\nexport const FormGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const Input = styled.input({\n  borderRadius: '3px',\n  border: '1px solid #f1f1f4',\n  background: '#f1f2f7',\n  padding: '8px 12px',\n});\n\nconst buttonColor = ({ variant }) => {\n  switch (variant) {\n    case 'primary':\n      return css`\n        background: #3f51b5;\n        color: white;\n      `;\n    case 'secondary':\n      return css`\n        background: #f1f2f7;\n        color: #434449;\n      `;\n    default:\n      break;\n  }\n};\n\nexport const Button = styled.button`\n  padding: 10px 15px;\n  border: 0;\n  line-height: 1;\n  border-radius: 3px;\n  ${buttonColor}\n`;\n\nexport const CircleButton = styled.button({\n  borderRadius: '30px',\n  padding: '0',\n  width: '40px',\n  height: '40px',\n  lineHeight: '1',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  background: 'white',\n  color: '#434449',\n  border: `1px solid #f1f1f4`,\n  cursor: 'pointer',\n});\n\nexport const Dialog = styled(ReachDialog)({\n  maxWidth: '450px',\n  borderRadius: '3px',\n  paddingBottom: '3.5em',\n  boxShadow: '0 10px 30px -5px rgba(0, 0, 0, 0.2)',\n  margin: '20vh auto',\n  [mq.small]: {\n    width: '100%',\n    margin: '10vh auto',\n  },\n});\n\nconst spin = keyframes`\n  0% {\n    transform: rotate(0deg)\n  }\n  100% {\n    transform: rotate(360deg)\n  }\n`;\n\nexport const Spinner = styled(FaSpinner)`\n  animation: ${spin} 1s linear infinite;\n`;\n\nexport function FullPageSpinner() {\n  return (\n    <div\n      css={{\n        fontSize: '4em',\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Spinner />\n    </div>\n  );\n}\n\nexport const BookListUL = styled.ul({\n  listStyle: 'none',\n  padding: '0',\n  display: 'grid',\n  gridTemplateRows: 'repeat(auto-fill, minmax(100px, 1fr))',\n  gridGap: '1em',\n});\n","const localStorageKey = '__auth_provider_token__';\n\nfunction getToken() {\n  return window.localStorage.getItem(localStorageKey);\n}\n\nfunction handleUserResponse(user) {\n  window.localStorage.setItem(localStorageKey, user.token);\n  return user;\n}\n\nfunction login({ username, password }) {\n  return client('login', { username, password }).then(handleUserResponse);\n}\n\nfunction register({ username, password }) {\n  return client('register', { username, password }).then(handleUserResponse);\n}\n\nfunction logout(token) {\n  return client('logout', { token })\n    .then((res) => {\n      console.log(res);\n    })\n    .catch((err) => {\n      Promise.reject(err);\n    })\n    .finally(() => {\n      window.localStorage.removeItem(localStorageKey);\n      window.location.href = '/';\n    });\n}\n\nconst authURL = process.env.REACT_APP_AUTH_URL;\n\nexport async function client(endpoint, data) {\n  const config = {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: { 'Content-Type': 'application/json' },\n  };\n\n  return window\n    .fetch(`${authURL}/${endpoint}`, config)\n    .then(async (response) => {\n      if (!response.ok) {\n        return Promise.reject(response.statusText);\n      }\n      const data = await response.json();\n      return data;\n    });\n}\n\nexport { getToken, login, register, logout, localStorageKey };\n","import * as React from 'react';\n\nfunction useSafeDispatch(dispatch) {\n  const mounted = React.useRef(false);\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => (mounted.current = false);\n  }, []);\n  return React.useCallback(\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch]\n  );\n}\n\nconst defaultInitialState = { status: 'idle', data: null, error: null };\nexport function useAsync(initialState) {\n  const initialStateRef = React.useRef({\n    ...defaultInitialState,\n    ...initialState,\n  });\n  const [{ data, error, status }, setState] = React.useReducer(\n    (oldState, newState) => {\n      return { ...oldState, ...newState };\n    },\n    initialStateRef.current\n  );\n  const safeSetState = useSafeDispatch(setState);\n  const setData = React.useCallback(\n    (data) => safeSetState({ data, status: 'resolved' }),\n    [safeSetState]\n  );\n  const setError = React.useCallback(\n    (error) => safeSetState({ error, status: 'rejected' }),\n    [safeSetState]\n  );\n  const reset = React.useCallback(\n    () => safeSetState(initialStateRef.current),\n    [safeSetState]\n  );\n  const run = React.useCallback(\n    (promise) => {\n      if (!promise || !promise.then) {\n        throw new Error(\n          `The argument passed to useAsync().run must be a promise. Maybe a function that's passed isn't returning anything?`\n        );\n      }\n      safeSetState({ status: 'pending' });\n      return promise.then(\n        (data) => {\n          setData(data);\n          return data;\n        },\n        (error) => {\n          setError(error);\n          return Promise.reject(error);\n        }\n      );\n    },\n    [safeSetState, setData, setError]\n  );\n  return {\n    isIdle: status === 'idle',\n    isLoading: status === 'pending',\n    isError: status === 'rejected',\n    isSuccess: status === 'resolved',\n\n    error,\n    status,\n    data,\n\n    setData,\n    setError,\n\n    run,\n    reset,\n  };\n}\n","export const base = 'white'\nexport const text = '#434449'\nexport const gray = '#f1f2f7'\nexport const gray10 = '#f1f1f4'\nexport const gray20 = '#e4e5e9'\nexport const gray80 = '#6f7077'\nexport const indigo = '#3f51b5'\nexport const indigoDarken10 = '#364495'\nexport const indigoLighten80 = '#b7c1f8'\nexport const yellow = '#ffc107'\nexport const green = '#4caf50'\nexport const danger = '#ef5350'\nexport const orange = 'orange'\n","import * as React from 'react';\nimport * as auth from '../auth-provider';\nimport { useAsync } from '../utils/hooks';\nimport { client } from '../auth-provider';\nimport * as colors from '../styles/colors';\nimport { FullPageSpinner } from '../components/lib';\n\nconst AuthContext = React.createContext();\nAuthContext.displayName = 'AuthContext';\n\nasync function getUser() {\n  let user = null;\n  const token = await auth.getToken();\n  if (token) {\n    try {\n      user = await client('me', { token });\n    } catch (error) {\n      auth.logout();\n    }\n  }\n\n  return user;\n}\n\nexport function AuthProvider(props) {\n  const {\n    data: user,\n    error,\n    isLoading,\n    isIdle,\n    isError,\n    isSuccess,\n    run,\n    setData,\n  } = useAsync();\n\n  React.useEffect(() => {\n    run(getUser());\n  }, [run]);\n\n  const login = React.useCallback(\n    (form) => auth.login(form).then((u) => setData(u)),\n    [setData]\n  );\n\n  const register = React.useCallback(\n    (form) => auth.register(form).then((u) => setData(u)),\n    [setData]\n  );\n  const logout = React.useCallback(\n    (token) => {\n      auth.logout(token).then(() => {\n        setData(null);\n      });\n    },\n    [setData]\n  );\n\n  const value = React.useMemo(\n    () => ({ user, login, logout, register }),\n    [login, logout, register, user]\n  );\n\n  if (isLoading || isIdle) {\n    return <FullPageSpinner />;\n  }\n\n  if (isError) {\n    return (\n      <div\n        css={{\n          color: colors.danger,\n          height: '100vh',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <p>Uh oh... There's a problem. Try refreshing the app.</p>\n        <pre>{error}</pre>\n      </div>\n    );\n  }\n  if (isSuccess) {\n    return <AuthContext.Provider value={value} {...props} />;\n  }\n}\n\nexport function useAuth() {\n  return React.useContext(AuthContext);\n}\n","import * as auth from '../auth-provider';\nimport * as React from 'react';\nimport { useAuth } from '../context/auth-context';\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport default function client(\n  endpoint,\n  { data, token, headers: customHeaders, ...customConfig } = {}\n) {\n  const config = {\n    method: data ? 'POST' : 'GET',\n    body: data ? JSON.stringify(data) : undefined,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined,\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n  return window\n    .fetch(`${API_URL}/${endpoint}`, config)\n    .then(async (response) => {\n      if (response.status === 401) {\n        auth.logout();\n        return Promise.reject({ message: 'Please re-authenticate.' });\n      }\n\n      if (!response.ok) {\n        return Promise.reject(response.statusText);\n      }\n      const data = await response.json();\n      return data;\n    });\n}\n\nexport function useClient() {\n  const { user } = useAuth();\n  const token = user?.token;\n  return React.useCallback(\n    (endpoint, config) => client(endpoint, { ...config, token }),\n    [token]\n  );\n}\n","import { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useClient } from './api-client';\n\nexport function useList() {\n  const client = useClient();\n  return useQuery('list', () => {\n    return client('list').then((res) => res.books);\n  });\n}\n\nexport function useListItem(bookId) {\n  const { data: books } = useList();\n  const item = books?.find((item) => item.book._id === bookId) ?? null;\n  return item;\n}\n\nexport function useCreateListItem() {\n  const queryClient = useQueryClient();\n  const client = useClient();\n  return useMutation((bookId) => client('list', { data: { bookId } }), {\n    onSuccess: () => queryClient.invalidateQueries('list'),\n  });\n}\n\nexport function useUpdateListItem() {\n  const queryClient = useQueryClient();\n  const client = useClient();\n  return useMutation(\n    ({ id, ...rest }) => {\n      return client('list', {\n        data: { bookId: id, ...rest },\n        method: 'PATCH',\n      });\n    },\n    {\n      onSuccess: () => queryClient.invalidateQueries('list'),\n    }\n  );\n}\n\nexport function useRemoveFromList() {\n  const queryClient = useQueryClient();\n  const client = useClient();\n  return useMutation(\n    (id) => {\n      return client('list', {\n        data: { bookId: id },\n        method: 'DELETE',\n      });\n    },\n    {\n      onSuccess: () => queryClient.invalidateQueries('list'),\n    }\n  );\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\n\nimport {\n  useListItem,\n  useCreateListItem,\n  useUpdateListItem,\n  useRemoveFromList,\n} from '../utils/list';\n\nimport {\n  FaCheckCircle,\n  FaPlusCircle,\n  FaMinusCircle,\n  FaBook,\n  FaTimesCircle,\n} from 'react-icons/fa';\nimport Tooltip from '@reach/tooltip';\nimport { CircleButton, Spinner } from './lib';\nimport * as colors from '../styles/colors';\n\nexport function TooltipButton({\n  label,\n  highlight,\n  icon,\n  isLoading,\n  isError,\n  error,\n  ...rest\n}) {\n  return (\n    <Tooltip label={isError ? error.message : label}>\n      <CircleButton\n        css={{\n          backgroundColor: 'white',\n          ':hover,:focus': {\n            color: isLoading\n              ? colors.gray80\n              : isError\n              ? colors.danger\n              : highlight,\n          },\n        }}\n        {...rest}\n      >\n        {isLoading ? <Spinner /> : isError ? <FaTimesCircle /> : icon}\n      </CircleButton>\n    </Tooltip>\n  );\n}\n\nexport default function StatusButton({ book }) {\n  const id = book._id;\n  const listItem = useListItem(id);\n  const { mutate: addToList, isLoading: addToListLoading } =\n    useCreateListItem();\n  const { mutate: removeFromList, isLoading: removeFromListLoading } =\n    useRemoveFromList();\n  const { mutate: updateItem, isLoading: updateItemLoading } =\n    useUpdateListItem();\n  return (\n    <div\n      css={css`\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        height: 100%;\n      `}\n    >\n      {listItem ? (\n        listItem.status === 'READING' ? (\n          <TooltipButton\n            label=\"mark as finished\"\n            onClick={() => updateItem({ id, status: 'FINISHED' })}\n            highlight={colors.yellow}\n            icon={updateItemLoading ? <Spinner /> : <FaBook />}\n          />\n        ) : (\n          <TooltipButton\n            label=\"mark as reading\"\n            onClick={() => updateItem({ id, status: 'READING' })}\n            icon={updateItemLoading ? <Spinner /> : <FaCheckCircle />}\n            highlight={colors.green}\n          />\n        )\n      ) : null}\n      {listItem ? (\n        <TooltipButton\n          label=\"remove from list\"\n          highlight={colors.danger}\n          onClick={() => removeFromList(id)}\n          icon={removeFromListLoading ? <Spinner /> : <FaMinusCircle />}\n        />\n      ) : (\n        <TooltipButton\n          label=\"Add to list\"\n          highlight={colors.indigo}\n          onClick={() => addToList(id)}\n          icon={addToListLoading ? <Spinner /> : <FaPlusCircle />}\n        />\n      )}\n    </div>\n  );\n}\n","/** @jsxImportSource @emotion/react */\n\nimport * as mq from '../styles/media-queries';\nimport * as colors from '../styles/colors';\nimport { Link } from 'react-router-dom';\nimport StatusButton from './status-button';\nimport { css } from '@emotion/react';\n\nfunction BookRow({ book, isLoading }) {\n  const { title, author, coverImageUrl } = book;\n  const id = book._id;\n  return (\n    <div\n      css={css`\n        position: relative;\n      `}\n    >\n      {isLoading ? null : (\n        <div\n          css={css`\n            position: absolute;\n            right: -20px;\n            height: 100%;\n          `}\n        >\n          <StatusButton book={book} />\n        </div>\n      )}\n      <Link\n        to={`book/${id}`}\n        css={{\n          minHeight: 270,\n          display: 'flex',\n          gap: '20px',\n          border: `1px solid ${colors.gray20}`,\n          color: colors.text,\n          padding: '1.25em',\n          borderRadius: '3px',\n          textDecoration: 'none',\n          ':hover,:focus': {\n            textDecoration: 'none',\n            boxShadow: '0 5px 15px -5px rgba(0,0,0,.08)',\n            color: 'inherit',\n          },\n        }}\n      >\n        <div\n          css={{\n            width: 140,\n            [mq.small]: {\n              width: 100,\n            },\n          }}\n        >\n          <img\n            src={coverImageUrl}\n            alt={`${title} book cover`}\n            css={{ maxHeight: '100%', width: '100%' }}\n          />\n        </div>\n        <div css={{ flex: 1 }}>\n          <div\n            css={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginBottom: '15px',\n            }}\n          >\n            <div css={{ flex: 1 }}>\n              <h2\n                id={id}\n                css={{\n                  fontSize: '1.25em',\n                  margin: '0',\n                  color: colors.indigo,\n                }}\n              >\n                {title}\n              </h2>\n            </div>\n            <div css={{ marginLeft: 10 }}>\n              <div\n                css={{\n                  marginTop: '0.4em',\n                  fontStyle: 'italic',\n                  fontSize: '0.85em',\n                }}\n              >\n                {author}\n              </div>\n              <small>{book.publisher}</small>\n            </div>\n          </div>\n          <small css={{ whiteSpace: 'break-spaces', display: 'block' }}>\n            {book.synopsis.substring(0, 500)}...\n          </small>\n        </div>\n      </Link>\n    </div>\n  );\n}\n\nexport { BookRow };\n","export default __webpack_public_path__ + \"static/media/book-placeholder.0a37bda0.svg\";","import bookPlaceholderSvg from '../assets/book-placeholder.svg';\nimport { useQuery } from 'react-query';\nimport { useClient } from './api-client';\n\nconst loadingBook = {\n  title: 'Loading...',\n  author: 'loading...',\n  coverImageUrl: bookPlaceholderSvg,\n  publisher: 'Loading Publishing',\n  synopsis: 'Loading...',\n  loadingBook: true,\n};\n\nexport const loadingBooks = Array.from({ length: 10 }, (v, index) => ({\n  _id: `loading-book-${index}`,\n  ...loadingBook,\n}));\n\nexport function useBooksSearch(query) {\n  const client = useClient();\n  const result = useQuery(['books', query], () =>\n    client(`book?query=${encodeURIComponent(query)}`)\n  );\n  return { ...result, data: result.data ?? loadingBooks };\n}\n\nexport function useBook(id) {\n  const client = useClient();\n  const result = useQuery(['book', id], () => client(`book/${id}`));\n  return { ...result, data: result.data ?? loadingBook };\n}\n","/** @jsxImportSource @emotion/react */\n\nimport { Input, Spinner, BookListUL } from '../components/lib';\nimport { BookRow } from '../components/book-row';\nimport { FaSearch, FaTimes } from 'react-icons/fa';\nimport * as colors from '../styles/colors';\n\nimport { css } from '@emotion/react';\n\nimport ToolTip from '@reach/tooltip';\nimport { useState } from 'react';\nimport { useAuth } from '../context/auth-context';\nimport { useBooksSearch } from '../utils/books';\n\nexport default function DiscoverBooksScreen() {\n  const { user } = useAuth();\n  const [query, setQuery] = useState('');\n  const {\n    data: books,\n    error,\n    isLoading,\n    isError,\n  } = useBooksSearch(query, user.token);\n\n  function handleSearchSubmit(e) {\n    e.preventDefault();\n    const search = e.target.elements?.search?.value;\n    setQuery(search);\n  }\n\n  return (\n    <div\n      css={css`\n        /* max-width: 800px; */\n        margin: auto;\n      `}\n    >\n      <form\n        onSubmit={handleSearchSubmit}\n        css={css`\n          margin-bottom: 30px;\n        `}\n      >\n        <Input\n          placeholder=\"search books...\"\n          id=\"search\"\n          css={css`\n            width: 100%;\n          `}\n        />\n        <ToolTip label=\"Search Books\">\n          <label htmlFor=\"search\">\n            <button\n              type=\"submit\"\n              css={css`\n                border: 0;\n                position: relative;\n                margin-left: -35px;\n                background: transparent;\n              `}\n            >\n              {isLoading ? (\n                <Spinner />\n              ) : isError ? (\n                <FaTimes css={{ color: colors.danger }} />\n              ) : (\n                <FaSearch />\n              )}\n            </button>\n          </label>\n        </ToolTip>\n      </form>\n      {isError ? (\n        <div css={{ color: colors.danger }}>\n          <p>There was an error:</p>\n          <pre>{error.message}</pre>\n        </div>\n      ) : null}\n      {books.length ? (\n        <BookListUL css={{ marginTop: 20 }}>\n          {books.map((book) => (\n            <li key={book._id}>\n              <BookRow key={book._id} book={book} isLoading={isLoading} />\n            </li>\n          ))}\n        </BookListUL>\n      ) : (\n        <p>No books found. Try another search.</p>\n      )}\n    </div>\n  );\n}\n","/** @jsxImportSource @emotion/react */\n\nimport { css } from '@emotion/react';\nimport { useParams } from 'react-router';\n\nimport { useBook } from '../utils/books';\nimport { useListItem, useUpdateListItem } from '../utils/list';\n\nimport * as mq from '../styles/media-queries';\nimport StatusButton from '../components/status-button';\nimport { Spinner } from '../components/lib';\n\nexport default function Book() {\n  const { bookId: id } = useParams();\n  const { data: book } = useBook(id);\n  const listItem = useListItem(id);\n  const { title, author, coverImageUrl, publisher, synopsis } = book;\n  return (\n    <div>\n      <div\n        css={css`\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        <div\n          css={css`\n            display: flex;\n            gap: 20px;\n            ${mq.small} {\n              flex-direction: column;\n              align-items: center;\n            }\n          `}\n        >\n          <img\n            src={coverImageUrl}\n            alt={`${title} book cover`}\n            css={{ width: '100%', maxWidth: '14rem' }}\n          />\n          <div\n            css={css`\n              display: flex;\n              gap: 20px;\n            `}\n          >\n            <div>\n              <h1>{title}</h1>\n              <div>\n                <i>{author}</i>\n                <span css={{ marginRight: 6, marginLeft: 6 }}>|</span>\n                <i>{publisher}</i>\n              </div>\n            </div>\n            <div\n              css={css`\n                height: 120px;\n              `}\n            >\n              {book.loadingBook ? null : <StatusButton book={book} />}\n            </div>\n          </div>\n        </div>\n\n        <div\n          css={css`\n            margin-top: 30px;\n          `}\n        >\n          <p css={{ whiteSpace: 'break-spaces', display: 'block' }}>\n            {synopsis}\n          </p>\n        </div>\n\n        {listItem && listItem.status === 'FINISHED' ? (\n          <NotesTextarea listItem={listItem} />\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nfunction NotesTextarea({ listItem }) {\n  const { mutate: updateListItem, isLoading } = useUpdateListItem();\n  const debounceMutate = debounce((id, notes) => updateListItem({ id, notes }));\n  function handleNotesChange(e) {\n    debounceMutate(listItem.book._id, e.target.value);\n  }\n  return (\n    <div>\n      <label\n        htmlFor=\"notes\"\n        css={{\n          display: 'inline-block',\n          marginRight: 10,\n          marginTop: '0',\n          marginBottom: '0.5rem',\n          fontWeight: 'bold',\n        }}\n      >\n        Notes\n      </label>\n      {isLoading ? <Spinner /> : null}\n      <textarea\n        id=\"notes\"\n        name=\"notes\"\n        onChange={handleNotesChange}\n        defaultValue={listItem.notes}\n        css={css`\n          width: 100%;\n          min-height: 120px;\n          display: block;\n          padding: 8px;\n        `}\n      />\n    </div>\n  );\n}\n\nfunction debounce(func, timeout = 300) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      func.apply(this, args);\n    }, timeout);\n  };\n}\n","export default function NotFound() {\n  return <div>404</div>;\n}\n","export const large = '@media (min-width: 1200px)';\nexport const medium = '@media (min-width: 992px) and (max-width: 1199px)';\nexport const small = '@media (max-width: 991px)';\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\n\nimport { useList } from '../utils/list';\nimport { BookListUL } from './lib';\nimport { BookRow } from './book-row';\nimport { Spinner } from './lib';\n\nfunction ListItemList({ filterListItems, noListItems, noFilteredListItems }) {\n  const { data, isLoading } = useList();\n  const listItems = data ?? [];\n  const filteredListItems = filterListItems(listItems);\n  if (isLoading) {\n    return (\n      <div\n        css={css`\n          display: flex;\n          justify-content: center;\n          margin-top: 30px;\n        `}\n      >\n        <Spinner />\n      </div>\n    );\n  }\n  if (!listItems.length) {\n    return (\n      <div css={{ marginTop: '1em', fontSize: '1.2em' }}>{noListItems}</div>\n    );\n  }\n  if (!filteredListItems.length) {\n    return (\n      <div css={{ marginTop: '1em', fontSize: '1.2em' }}>\n        {noFilteredListItems}\n      </div>\n    );\n  }\n  return (\n    <BookListUL>\n      {filteredListItems.length &&\n        filteredListItems.map((listItem) => (\n          <li key={listItem.book._id}>\n            <BookRow book={listItem.book} />\n          </li>\n        ))}\n    </BookListUL>\n  );\n}\n\nexport { ListItemList };\n","import { Link } from 'react-router-dom';\nimport { ListItemList } from '../components/book-list';\n\nexport default function FinishedScreen() {\n  return (\n    <ListItemList\n      filterListItems={(li) => li.filter((i) => i.status === 'FINISHED')}\n      noListItems={\n        <p>\n          Hey there! This is where books will go when you've finished reading\n          them. Get started by heading over to{' '}\n          <Link to=\"/discover\">the Discover page</Link> to add books to your\n          list.\n        </p>\n      }\n      noFilteredListItems={\n        <p>\n          Looks like you've got some reading to do! Check them out in your{' '}\n          <Link to=\"/reading\">reading list</Link> or{' '}\n          <Link to=\"/discover\">discover more</Link>.\n        </p>\n      }\n    />\n  );\n}\n","import { Link } from 'react-router-dom';\nimport { ListItemList } from '../components/book-list';\n\nexport default function ReadingListScreen() {\n  return (\n    <ListItemList\n      filterListItems={(li) => li.filter((i) => i.status === 'READING')}\n      noListItems={\n        <p>\n          Hey there! Welcome to your bookshelf reading list. Get started by\n          heading over to <Link to=\"/discover\">the Discover page</Link> to add\n          books to your list.\n        </p>\n      }\n      noFilteredListItems={\n        <p>\n          Looks like you've finished all your books! Check them out in your{' '}\n          <Link to=\"/finished\">finished books</Link> or{' '}\n          <Link to=\"/discover\">discover more</Link>.\n        </p>\n      }\n    />\n  );\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Button } from './components/lib';\nimport { useAuth } from './context/auth-context';\nimport DiscoverBooksScreen from './screens/discover';\nimport { Switch, Route, Redirect, Link, useRouteMatch } from 'react-router-dom';\nimport BookScreen from './screens/book';\nimport NotFoundScreen from './screens/not-found';\nimport * as colors from './styles/colors';\nimport * as mq from './styles/mq';\nimport FinishedScreen from './screens/finished';\nimport ReadingListScreen from './screens/reading-list';\nexport default function AuthenticatedApp() {\n  const { user, logout } = useAuth();\n  return (\n    <div>\n      <div\n        css={css`\n          display: flex;\n          justify-content: flex-end;\n          align-items: center;\n          margin-top: 20px;\n          margin-right: 20px;\n        `}\n      >\n        {user.username}\n        <Button\n          variant=\"secondary\"\n          css={{ marginLeft: '10px' }}\n          onClick={() => logout(user.token)}\n        >\n          Logout\n        </Button>\n      </div>\n      <div\n        css={{\n          margin: '0 auto',\n          padding: '4em 2em',\n          maxWidth: '1200px',\n          width: '100%',\n          display: 'flex',\n          gap: '30px',\n          [mq.small]: {\n            flexDirection: 'column',\n          },\n        }}\n      >\n        <div css={{ minWidth: '200px' }}>\n          <Nav />\n        </div>\n        <main css={{ flexGrow: 1 }}>\n          <AppRoutes />\n        </main>\n      </div>\n    </div>\n  );\n}\n\nfunction AppRoutes() {\n  return (\n    <Switch>\n      <Route path=\"/\" exact render={() => <Redirect to=\"/discover\" />} />\n      <Route path=\"/discover\" component={DiscoverBooksScreen} />\n      <Route path=\"/finished\" component={FinishedScreen} />\n      <Route path=\"/reading\" component={ReadingListScreen} />\n      <Route path=\"/book/:bookId\" component={BookScreen} />\n      <Route path=\"*\" component={NotFoundScreen} />\n    </Switch>\n  );\n}\n\nfunction NavLink(props) {\n  const match = useRouteMatch(props.to);\n  return (\n    <Link\n      css={[\n        {\n          display: 'block',\n          padding: '8px 15px 8px 10px',\n          margin: '5px 0',\n          width: '100%',\n          height: '100%',\n          color: colors.text,\n          borderRadius: '2px',\n          borderLeft: '5px solid transparent',\n          textDecoration: 'none',\n          ':hover': {\n            color: colors.indigo,\n            textDecoration: 'none',\n            background: colors.gray10,\n          },\n        },\n        match\n          ? {\n              borderLeft: `5px solid ${colors.indigo}`,\n              background: colors.gray10,\n              ':hover': {\n                background: colors.gray10,\n              },\n            }\n          : null,\n      ]}\n      {...props}\n    />\n  );\n}\n\nfunction Nav() {\n  return (\n    <nav\n      css={{\n        padding: '1em 1.5em',\n        border: `1px solid ${colors.gray10}`,\n        borderRadius: '3px',\n      }}\n    >\n      <ul\n        css={{\n          listStyle: 'none',\n          padding: '0',\n        }}\n      >\n        <li>\n          <NavLink to=\"/discover\">Discover</NavLink>\n          <NavLink to=\"/reading\">Reading List</NavLink>\n          <NavLink to=\"/finished\">Finished Books</NavLink>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n","import * as React from 'react';\n\nconst Logo = ({ width = '48', height = '48' }) => {\n  return (\n    <svg\n      width={`${width}px`}\n      height={`${height}px`}\n      viewBox={`0 0 48 48`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <title>Bookshelf</title>\n      <g>\n        <path\n          d=\"M12,5H2C1.44772,5,1,5.44772,1,6v27h12V6C13,5.44772,12.55229,5,12,5z\"\n          fill=\"#E86C60\"\n        />\n        <path\n          d=\"M12,43H2c-0.55228,0-1-0.44772-1-1V32h12v10C13,42.55228,12.55229,43,12,43z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M8,23H6c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55229,0,1,0.44771,1,1v11 C9,22.55228,8.55229,23,8,23z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M35.44301,3.67613l-9.68988,2.47109c-0.53516,0.13647-0.85835,0.68094-0.72188,1.2161l6.67194,26.16267 l11.62785-2.96531L36.6591,4.398C36.52263,3.86285,35.97816,3.53965,35.44301,3.67613z\"\n          fill=\"#43A6DD\"\n        />\n        <path\n          d=\"M44.83315,40.49766l-9.68988,2.47109c-0.53516,0.13647-1.07962-0.18672-1.21609-0.72188l-2.47109-9.68988 l11.62785-2.96531l2.47109,9.68987C45.69151,39.81672,45.36831,40.36118,44.83315,40.49766z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M36.01502,22.10634l-1.93797,0.49422c-0.53516,0.13647-1.07962-0.18672-1.2161-0.72188l-2.7182-10.65886 c-0.13647-0.53516,0.18672-1.07962,0.72188-1.2161L32.8026,9.5095c0.53516-0.13647,1.07962,0.18672,1.2161,0.72188l2.7182,10.65886 C36.87337,21.4254,36.55017,21.96987,36.01502,22.10634z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M24,5H14c-0.55229,0-1,0.44772-1,1v27h12V6C25,5.44772,24.55228,5,24,5z\"\n          fill=\"#E6E6E6\"\n        />\n        <path\n          d=\"M24,43H14c-0.55229,0-1-0.44772-1-1V32h12v10C25,42.55228,24.55228,43,24,43z\"\n          fill=\"#B3B3B3\"\n        />\n        <path\n          d=\"M20,23h-2c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55228,0,1,0.44771,1,1v11 C21,22.55228,20.55228,23,20,23z\"\n          fill=\"#FFFFFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport default Logo;\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { cloneElement, createContext, useContext, useState } from 'react';\nimport { Dialog, CircleButton } from './lib';\n\nconst callAll =\n  (...fns) =>\n  (...args) => {\n    fns.forEach((fn) => fn && fn(...args));\n  };\n\nconst ModalContext = createContext();\nModalContext.displayName = 'ModalContext';\n\nfunction Modal({ children, ...props }) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <ModalContext.Provider value={[isOpen, setIsOpen]} {...props}>\n      {children}\n    </ModalContext.Provider>\n  );\n}\n\nfunction ModalDismissButton({ children: child }) {\n  const [, setIsOpen] = useContext(ModalContext);\n  return cloneElement(child, {\n    onClick: callAll(() => setIsOpen(false), child.props.onClick),\n  });\n}\n\nfunction ModalOpenButton({ children: child }) {\n  const [, setIsOpen] = useContext(ModalContext);\n  return cloneElement(child, {\n    onClick: callAll(() => setIsOpen(true), child.props.onClick),\n  });\n}\n\nfunction ModalContentsBase(props) {\n  const [isOpen, setIsOpen] = useContext(ModalContext);\n  return (\n    <Dialog\n      isOpen={isOpen}\n      onDismiss={() => setIsOpen(false)}\n      {...props}\n    ></Dialog>\n  );\n}\n\nfunction ModalContents({ title, children, ...props }) {\n  return (\n    <ModalContentsBase {...props}>\n      <div\n        css={css`\n          display: flex;\n          justify-content: flex-end;\n        `}\n      >\n        <ModalDismissButton>\n          <CircleButton>x</CircleButton>\n        </ModalDismissButton>\n      </div>\n      <h3\n        css={css`\n          text-align: center;\n          font-size: 2em;\n        `}\n      >\n        {title}\n      </h3>\n      {children}\n    </ModalContentsBase>\n  );\n}\n\nexport { Modal, ModalOpenButton, ModalDismissButton, ModalContents };\n","/** @jsxImportSource @emotion/react */\n\nimport { css } from '@emotion/react';\nimport Logo from './components/logo';\nimport { FormGroup, Input, Button, Spinner } from './components/lib';\nimport { Modal, ModalOpenButton, ModalContents } from './components/modal';\nimport { cloneElement } from 'react';\nimport { useAuth } from './context/auth-context';\nimport { useAsync } from './utils/hooks';\nimport * as colors from './styles/colors';\n\nfunction LoginForm({ onSubmit, submitButton }) {\n  const { isLoading, isError, error, run } = useAsync();\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const username = e.target.elements?.username?.value;\n    const password = e.target.elements?.password?.value;\n    run(onSubmit({ username, password }));\n  };\n\n  return (\n    <form\n      onSubmit={(e) => handleSubmit(e)}\n      css={css`\n        display: flex;\n        flex-direction: column;\n        align-items: stretch;\n        > div {\n          margin: 10px auto;\n          width: 100%;\n          max-width: 300px;\n        }\n      `}\n    >\n      <FormGroup>\n        <label htmlFor=\"username\">username</label>\n        <Input type=\"text\" id=\"username\" />\n      </FormGroup>\n      <FormGroup>\n        <label htmlFor=\"password\">password</label>\n        <Input type=\"password\" id=\"password\" />\n      </FormGroup>\n      <div>\n        {cloneElement(\n          submitButton,\n          {\n            type: 'primary',\n          },\n          ...(Array.isArray(submitButton.props.children)\n            ? submitButton.props.children\n            : [submitButton.props.children]),\n          isLoading ? <Spinner css={{ marginLeft: 5 }} /> : null\n        )}\n      </div>\n      {isError ? <div css={{ color: colors.danger }}>{error}</div> : null}\n    </form>\n  );\n}\n\nexport default function UnauthenticatedApp() {\n  const { login, register } = useAuth();\n  return (\n    <div\n      css={css`\n        height: 100vh;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 10px 0;\n      `}\n    >\n      <Logo width=\"80\" height=\"80\" />\n      <h1>Bookshelf</h1>\n      <div\n        css={css`\n          & > button {\n            margin: 0 6px;\n          }\n        `}\n      >\n        <Modal>\n          <ModalOpenButton>\n            <Button variant=\"primary\">Login</Button>\n          </ModalOpenButton>\n          <ModalContents title=\"Login\" aria-label=\"login\">\n            <LoginForm\n              onSubmit={login}\n              submitButton={<Button variant=\"primary\">login</Button>}\n            />\n          </ModalContents>\n        </Modal>\n        <Modal>\n          <ModalOpenButton>\n            <Button variant=\"secondary\">Register</Button>\n          </ModalOpenButton>\n          <ModalContents title=\"Register\" aria-label=\"register\">\n            <LoginForm\n              submitButton={<Button variant=\"secondary\">register</Button>}\n              onSubmit={register}\n            />\n          </ModalContents>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport AuthenticatedApp from './authenticated-app';\nimport UnauthenticatedApp from './unauthenticated-app';\nimport { useAuth } from './context/auth-context';\n\nexport default function App() {\n  const { user } = useAuth();\n  return user ? <AuthenticatedApp /> : <UnauthenticatedApp />;\n}\n","import { AuthProvider } from './auth-context';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60,\n      cacheTime: 1000 * 60,\n    },\n  },\n});\n\nexport default function AppProviders({ children }) {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Router>\n        <AuthProvider>{children}</AuthProvider>\n      </Router>\n    </QueryClientProvider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\nimport AppProviders from './context/index';\nimport { ReactQueryDevtools } from 'react-query/devtools';\nimport './bootstrap';\n\nconst root = document.getElementById('root');\nReactDOM.render(\n  <AppProviders>\n    <App />\n    <ReactQueryDevtools />\n  </AppProviders>,\n  root\n);\n"],"sourceRoot":""}